<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    

     <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SECURA - Plateforme de gestion d'Ã©vÃ©nements sÃ©curisÃ©e avec QR Code">
   <title>Mon Profil â€¢ SECURA</title>



    <!-- ğŸš€ Autres ressources essentielles -->
    <link rel="icon" href="assets/images/icon.png" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <!-- Styles locaux -->
    <link rel="stylesheet" href="css/styles.css">
<link rel="stylesheet" href="css/loading.css">
    <link rel="stylesheet" href="css/dash.css">
    <link rel="stylesheet" href="css/toastify.css">

    <script async src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>

    <!-- SweetAlert2 -->
    <link rel="preload" href="js/auth-check.js" as="script">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


  <style>
        .main-content {
            padding-top: 120px;
            min-height: calc(100vh - 200px);
        }
        
        .actions-bar {
            background: var(--secura-white);
            padding: 25px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            margin-bottom: 20px;
            position: relative;
            display: none;
        }

        .dark-theme .actions-bar {
            background: var(--secura-light-gray);
        }

        .actions-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }

        .actions-left {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .actions-right {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        /* Section filtres dÃ©roulante - Version compacte */
    .filters-dropdown-section {
        display: none;
        background: var(--secura-light-gray);
        border-radius: var(--radius-lg);
        padding: 20px;
        margin-top: 15px;
        animation: slideDown 0.3s ease;
    }

    .dark-theme .filters-dropdown-section {
        background: var(--secura-brown);
    }

    .filters-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
    }

    .filter-section {
        background: var(--secura-white);
        border-radius: var(--radius-md);
        padding: 15px;
        box-shadow: var(--shadow-sm);
    }

    .dark-theme .filter-section {
        background: var(--secura-light-gray);
    }

    .filter-section-header {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 12px;
        font-weight: 600;
        color: var(--secura-red);
        font-size: 0.9rem;
    }

    .filter-section-header i {
        font-size: 0.8rem;
    }

    /* Groupes de chips */
    .filter-chips-group {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 12px;
    }

    .filter-chips-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
    }

    .filter-chips-row {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
    }

    /* Chips de filtre - Version petite */
    .filter-chip-small,
    .filter-chip-type,
    .filter-chip-status {
        padding: 6px 12px;
        background: var(--secura-light-gray);
        border-radius: var(--radius-lg);
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 0.8rem;
        cursor: pointer;
        transition: all 0.2s ease;
        border: 1px solid transparent;
        flex: 1;
        min-width: fit-content;
    }

    .dark-theme .filter-chip-small,
    .dark-theme .filter-chip-type,
    .dark-theme .filter-chip-status {
        background: var(--secura-brown);
    }

    .filter-chip-small:hover,
    .filter-chip-type:hover,
    .filter-chip-status:hover {
        background: var(--secura-red-light);
        transform: translateY(-1px);
    }

    .filter-chip-small.active,
    .filter-chip-type.active,
    .filter-chip-status.active {
        background: var(--secura-red);
        color: white;
        border-color: var(--secura-red-dark);
    }

    .filter-chip-small i,
    .filter-chip-type i,
    .filter-chip-status i {
        font-size: 0.75rem;
    }

    /* Dates */
    .filter-dates-row {
        display: flex;
        gap: 10px;
        margin-top: 10px;
    }

    .date-input-group {
        flex: 1;
        display: flex;
        align-items: center;
        gap: 6px;
        background: var(--secura-light-gray);
        padding: 6px 10px;
        border-radius: var(--radius-md);
    }

    .dark-theme .date-input-group {
        background: var(--secura-brown);
    }

    .date-label {
        font-size: 0.8rem;
        color: var(--secura-text-gray);
        white-space: nowrap;
    }

    .date-input {
        flex: 1;
        border: none;
        background: transparent;
        color: var(--secura-black);
        font-size: 0.8rem;
        padding: 2px;
        min-width: 0;
    }

    .dark-theme .date-input {
        color: var(--secura-white);
    }

    .date-input:focus {
        outline: none;
    }

    /* Slider capacitÃ© */
    .capacity-slider-container {
        padding: 10px 0;
    }

    .capacity-labels {
        display: flex;
        justify-content: space-between;
        margin-bottom: 8px;
        font-size: 0.75rem;
        color: var(--secura-text-gray);
    }

    .capacity-slider {
        width: 100%;
        height: 6px;
        border-radius: 3px;
        background: var(--secura-light-gray);
        outline: none;
        -webkit-appearance: none;
    }

    .dark-theme .capacity-slider {
        background: var(--secura-brown);
    }

    .capacity-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: var(--secura-red);
        cursor: pointer;
        border: 2px solid white;
        box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }

    .capacity-slider::-moz-range-thumb {
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: var(--secura-red);
        cursor: pointer;
        border: 2px solid white;
        box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }

    .capacity-hint {
        display: flex;
        align-items: center;
        gap: 6px;
        margin-top: 8px;
        font-size: 0.75rem;
        color: var(--secura-text-gray);
    }

    .capacity-hint i {
        font-size: 0.7rem;
    }

    /* Actions des filtres */
    .filters-actions {
        display: flex;
        justify-content: flex-end;
        gap: 12px;
        padding-top: 15px;
        border-top: 1px solid var(--secura-medium-gray);
    }

    .filters-actions .btn {
        padding: 8px 16px;
        font-size: 0.85rem;
    }

    /* Responsive */
    @media (max-width: 768px) {
        .filters-grid {
            grid-template-columns: 1fr;
        }

        .filter-chips-grid {
            grid-template-columns: repeat(4, 1fr);
        }

        .filter-dates-row {
            flex-direction: column;
        }
    }

    @media (max-width: 480px) {
        .filter-chips-grid {
            grid-template-columns: repeat(2, 1fr);
        }

        .filters-actions {
            flex-direction: column;
        }

        .filters-actions .btn {
            width: 100%;
        }
    }

     /* Badges filtres actifs */
        .active-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--secura-light-gray);
        }

        .filter-badge {
            background: var(--secura-red);
            color: white;
            padding: 6px 15px;
            border-radius: 0.5rem;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 8px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        .filter-badge .remove-filter {
            background: none;
            border: none;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            padding: 0;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }

        .filter-badge .remove-filter:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Filtres Rapides */
        .quick-filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-chip {
            padding: 8px 16px;
            background: var(--secura-light-gray);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .dark-theme .filter-chip {
            background: var(--secura-brown);
        }

        .btn-filter{
            padding: 8px 16px;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
            background: var(--secura-red);
            color: white;

        }

        .filter-chip:hover, .btn-filter:hover {
            background: var(--secura-red);
            color: white;
            transform: translateY(-1px);
        }

        .filter-chip.active {
            background: var(--secura-red);
            color: white;
            border: 1px solid white;
        }

        /* Barre de recherche */
        .search-container {
            position: relative;
            width: 300px;
        }

        @media (max-width: 768px) {
            .search-container {
                width: 100%;
            }
        }

        .search-container i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--secura-text-gray);
        }

        .search-container input {
            width: 100%;
            padding: 12px 20px 12px 45px;
            border: 2px solid var(--secura-light-gray);
            border-radius: var(--radius-md);
            font-size: 1rem;
            background: var(--secura-white);
            transition: all 0.3s ease;
        }

        .dark-theme .search-container input {
            background: var(--secura-light-gray);
            border-color: var(--secura-brown);
            color: var(--secura-white);
        }

        .search-container input:focus {
            outline: none;
            border-color: var(--secura-red);
            box-shadow: 0 0 0 3px rgba(217, 119, 6, 0.1);
        }

        /* Statistiques avancÃ©es */
        .stats-advanced {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .stat-card-pro {
            background: var(--secura-white);
            padding: 25px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            text-align: center;
            transition: all 0.3s ease;
            border-top: 4px solid;
            position: relative;
            overflow: hidden;
        }

        .dark-theme .stat-card-pro {
            background: var(--secura-light-gray);
        }

        .stat-card-pro:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .stat-card-pro::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
        }

        .stat-icon-pro {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 1.8rem;
            color: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .stat-content-pro {
            margin-bottom: 15px;
        }

        .stat-number-pro {
            font-size: 2.8rem;
            font-weight: 800;
            line-height: 1;
            margin-bottom: 5px;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-label-pro {
            color: var(--secura-text-gray);
            font-size: 0.95rem;
            font-weight: 500;
            margin-bottom: 5px;
        }

        .stat-trend {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            font-size: 0.85rem;
            padding: 4px 10px;
            border-radius: 20px;
            background: rgba(16, 185, 129, 0.1);
            color: #10B981;
        }

        .stat-trend.down {
            background: rgba(239, 68, 68, 0.1);
            color: #EF4444;
        }

        /* Graphiques */
        .charts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .chart-card {
            background: var(--secura-white);
            padding: 30px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
        }

        .dark-theme .chart-card {
            background: var(--secura-light-gray);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .chart-header h4 {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--secura-red);
            font-size: 1.2rem;
        }

        .chart-canvas {
            height: 300px;
            width: 100%;
        }

        /* Performance grid */
        .performance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .performance-card {
            background: var(--secura-white);
            padding: 25px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            display: flex;
            align-items: center;
            gap: 20px;
            transition: all 0.3s ease;
        }

        .dark-theme .performance-card {
            background: var(--secura-light-gray);
        }

        .performance-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .performance-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            flex-shrink: 0;
        }

        .performance-content {
            flex: 1;
        }

        .performance-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--secura-black);
        }

        .dark-theme .performance-title {
            color: var(--secura-white);
        }

        .performance-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--secura-red);
        }

        /* Grille d'Ã©vÃ©nements */
        .events-grid-container {
            background: var(--secura-white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            padding: 30px;
            min-height: 500px;
        }

        .dark-theme .events-grid-container {
            background: var(--secura-light-gray);
        }

        .grid-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--secura-light-gray);
        }

        .dark-theme .grid-header {
            border-bottom-color: var(--secura-brown);
        }

        .grid-header h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.4rem;
            color: var(--secura-black);
        }

        .dark-theme .grid-header h3 {
            color: var(--secura-white);
        }

        .view-toggle {
            display: flex;
            gap: 5px;
            background: var(--secura-light-gray);
            padding: 5px;
            border-radius: var(--radius-md);
        }

        .dark-theme .view-toggle {
            background: var(--secura-brown);
        }

        .view-btn {
            padding: 10px 20px;
            border-radius: var(--radius-lg);
            background: transparent;
            border: none;
            font-weight: 600;
            cursor: pointer;
            color: var(--secura-text-gray);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .view-btn:hover ,.create:hover  {
            background: var(--secura-red) !important;
            color: white;
        }

        .view-btn.active {
            background: var(--secura-red);
            color: white;
        }

       


      

        /* Mode Table */
        .events-table {
            width: 100%;
            border-collapse: collapse;
        }

        .events-table th {
            background: var(--secura-light-gray);
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: var(--secura-black);
            border-bottom: 2px solid var(--secura-medium-gray);
        }

        .dark-theme .events-table th {
            background: var(--secura-brown);
            color: var(--secura-white);
        }

        .events-table td {
            padding: 15px;
            border-bottom: 1px solid var(--secura-light-gray);
        }

        .dark-theme .events-table td {
            border-bottom-color: var(--secura-brown);
        }

        .events-table tbody tr:hover {
            background: rgba(217, 119, 6, 0.05);
        }

        /* Ã‰tat vide */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--secura-text-gray);
        }

        .empty-state i {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--secura-black);
        }

        .dark-theme .empty-state h3 {
            color: var(--secura-white);
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 40px;
        }

        .page-btn {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--secura-light-gray);
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .dark-theme .page-btn {
            background: var(--secura-brown);
        }

        .page-btn:hover {
            background: var(--secura-red);
            color: white;
        }

        .page-btn.active {
            background: var(--secura-red);
            color: white;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .events-grid {
                grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            }
            
            .charts-container {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                padding-top: 100px;
            }
            
            .actions-top {
                flex-direction: column;
                align-items: stretch;
            }
            
            .actions-left, .actions-right {
                width: 100%;
                justify-content: center;
            }
            
            .events-grid {
                grid-template-columns: 1fr;
            }
            
            .filters-grid {
                grid-template-columns: 1fr;
            }
            
            .stat-card-pro {
                padding: 20px;
            }
            
            .stat-number-pro {
                font-size: 2.2rem;
            }
        }

        @media (max-width: 480px) {
            .grid-header {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }
            
            .view-toggle {
                justify-content: center;
            }
            
            .view-btn {
                padding: 8px 15px;
                font-size: 0.9rem;
            }
            
            .stat-icon-pro {
                width: 50px;
                height: 50px;
                font-size: 1.3rem;
            }
        }

       

        .animate-slide-in {
            animation: slideIn 0.4s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
    </style>
  
    <style>
    


        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /* CARDS */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .card {
            background: rgba(30, 30, 30, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 1.2rem;
            padding: 2rem;
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow-md);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(217, 119, 6, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .card:hover {
            border-color: rgba(217, 119, 6, 0.3);
            background: rgba(30, 30, 30, 0.8);
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(217, 119, 6, 0.15);
        }

        .card:hover::before {
            left: 100%;
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--secura-red);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            position: relative;
            z-index: 1;
        }

        .card-title i {
            font-size: 1.5rem;
        }

        .card-content {
            position: relative;
            z-index: 1;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /* INFO GRID */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .info-item {
            display: flex;
            flex-direction: column;
        }

        .info-label {
            font-size: 0.75rem;
            color: var(--secura-medium-gray);
            margin-bottom: 0.6rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .info-label i {
            font-size: 0.9rem;
        }

        .info-value {
            font-size: 1.1rem;
            color: var(--secura-white);
            font-weight: 500;
            word-break: break-word;
            padding: 0.5rem 0;
            border-bottom: 2px solid rgba(217, 119, 6, 0.2);
        }

        .info-value.muted {
            color: var(--secura-text-gray);
            font-size: 0.95rem;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /* STATS GRID */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .stats-section {
            margin-bottom: 2rem;
        }

        .stats-section-title {
            color: var(--secura-red);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(217, 119, 6, 0.15), rgba(244, 162, 97, 0.08));
            border: 1px solid rgba(217, 119, 6, 0.3);
            border-radius: 1rem;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(217, 119, 6, 0.2), transparent);
            border-radius: 50%;
        }

        .stat-card:hover {
            transform: translateY(-6px);
            border-color: var(--secura-red);
            background: linear-gradient(135deg, rgba(217, 119, 6, 0.2), rgba(244, 162, 97, 0.12));
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--secura-red);
            margin-bottom: 0.75rem;
            position: relative;
            z-index: 1;
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--secura-text-gray);
            position: relative;
            z-index: 1;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /* ACTION BUTTONS */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.6rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.25s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-size: 0.95rem;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:active::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: var(--secura-red);
            color: white;
        }

        .btn-primary:hover {
            background: var(--secura-dark-red);
            transform: translateY(-2px);
            box-shadow: var(--shadow-glow);
        }

        .btn-secondary {
            background: rgba(217, 119, 6, 0.1);
            color: var(--secura-red);
            border: 1px solid var(--secura-red);
        }

        .btn-secondary:hover {
            background: rgba(217, 119, 6, 0.2);
            transform: translateY(-2px);
        }

        .btn-danger {
            background: var(--secura-error);
            color: white;
        }

        .btn-danger:hover {
            background: #DC2626;
            transform: translateY(-2px);
            box-shadow: 0 0 12px rgba(239, 68, 68, 0.4);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /* LOADING & STATES */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .loading-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            color: var(--secura-red);
            padding: 3rem;
            min-height: 400px;
        }

        .spinner {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 3px solid rgba(217, 119, 6, 0.2);
            border-top-color: var(--secura-red);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .empty-state {
            text-align: center;
            padding: 3rem 2rem;
            color: var(--secura-text-gray);
        }

        .empty-state i {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            color: var(--secura-red);
            opacity: 0.6;
        }

        .empty-state h3 {
            color: var(--secura-white);
            margin-bottom: 0.5rem;
            font-size: 1.3rem;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /* FORM */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .form-input {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            padding: 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.95rem;
            transition: all 0.25s ease;
            font-family: inherit;
        }

        .form-input::placeholder {
            color: var(--secura-text-gray);
        }

        .form-input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.08);
            border-color: var(--secura-red);
            box-shadow: 0 0 12px rgba(217, 119, 6, 0.2);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /* SECTIONS & DIVIDERS */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .section {
            margin-bottom: 2.5rem;
        }

        .section-divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(217, 119, 6, 0.3), transparent);
            margin: 2.5rem 0;
        }

      

    </style>
</head>
<body class="light-theme">
    <!-- Particles Background -->
    <div id="particles-js"></div>
    
    <!-- Sidebar -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">
                <div class="sidebar-logo-icon">
                    <img src="assets/images/icon.png" alt="logo secura">
                </div>
                <div class="sidebar-logo-text">
                    <h1>SECURA</h1>
                    <p>Gestion SÃ©curisÃ©e</p>
                </div>
            </div>
            <button class="sidebar-close action-btn" id="sidebarClose" aria-label="Fermer le menu">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <!-- Profile Section -->
        <div class="sidebar-profile">
            <div class="profile-avatar large">
                <i class="bi bi-person-circle"></i>
            </div>
            <div class="profile-details">
                <strong id="sidebarProfileName">Chargement...</strong>
                <small id="sidebarProfileEmail">email@exemple.com</small>
                <span class="badge-role" id="sidebarProfileRole">Utilisateur</span>
            </div>
        </div>
        <!-- Navigation Links -->
        <div id="navMenu" class="sidebar-menu">
            <a href="index.html" class="sidebar-link active">
                <i class="fas fa-home"></i>
                <span>Accueil</span>
            </a>
            <a href="events.html" class="sidebar-link">
                <i class="fas fa-calendar-alt"></i>
                <span>Ã‰vÃ©nements</span>
            </a>
            <a href="guests.html" class="sidebar-link">
                <i class="fas fa-users"></i>
                <span>InvitÃ©s</span>
            </a>
<a href="tables.html" class="sidebar-link">
                <i class="fas fa-chair"></i>
                <span>Tables</span>
            </a>
            <a href="galleries.html" class="sidebar-link active">
                <i class="fas fa-images"></i>
                <span>Galeries</span>
            </a>
            <a href="qr-generator.html" class="sidebar-link">
                <i class="bi bi-qr-code"></i>
                <span>GÃ©nÃ©rateur QR</span>
            </a>
            <a href="ticket-generator.html" class="sidebar-link">
                <i class="fas fa-ticket-alt"></i>
                <span>Billets</span>
            </a>
            <a href="checkin.html" class="sidebar-link">
                <i class="fas fa-clipboard-check"></i>
                <span>Validation de PrÃ©sence</span>
            </a>
            <hr class="sidebar-divider">
            <a href="access.html" class="sidebar-link" id="accessEventLink">
                <i class="fas fa-ticket-alt"></i>
                <span>AccÃ¨s Ã‰vÃ©nement</span>
            </a>
            <a href="profile.html" class="sidebar-link">
                <i class="fas fa-user"></i>
                <span>Mon Profil</span>
            </a>
            <a href="settings.html" class="sidebar-link">
                <i class="fas fa-cog"></i>
                <span>ParamÃ¨tres</span>
            </a>
            <button class="sidebar-link text-danger" id="sidebarLogout">
                <i class="fas fa-sign-out-alt"></i>
                <span>DÃ©connexion</span>
            </button>
        </div>
        <!-- Footer -->
        <div class="sidebar-footer">
            <button class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i>
                <span>Mode Sombre</span>
            </button>
            <button class="fullscreen-toggle" id="fullscreenToggle">
                <i class="fas fa-expand"></i>
                <span>Plein Ã©cran</span>
            </button>
            
        </div>
    </nav>
    
    <!-- Overlay pour fermer la sidebar -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    
    <!-- Bouton flottant pour ouvrir la sidebar -->
    <button class="sidebar-toggle" id="sidebarToggle" aria-label="Ouvrir le menu">
        <i class="fas fa-bars"></i>
    </button>
    
    <!-- Top Bar -->
    <header class="header">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo-icon">
                    <img src="assets/images/icon.png" alt="logo secura">
                </div>
                <div class="logo-text">
                    <h1>SECURA</h1>
                    <p>Tableau de Bord </p>
                </div>
            </div>
            
            
            <!-- Profile Button -->
            <button class="profile-toggle header-profile-btn" id="profileToggle" aria-haspopup="true" aria-expanded="false">
                <div class="profile-avatar">
                    <i class="bi bi-person-circle"></i>
                </div>
                <div class="profile-info">
                    <span class="profile-name" id="profileName">Chargement...</span>
                    <span class="profile-role" id="profileRole">Utilisateur</span>
                </div>
                <i class="bi bi-chevron-down profile-arrow"></i>
            </button>
        </div>
    </header>
    
    <!-- Profile Menu -->
    <div class="floating-profile-menu" id="floatingProfileMenu">
        <div class="profile-dropdown show" id="profileDropdown" role="menu">
            <div class="profile-header">
                <div class="profile-avatar large">
                    <i class="bi bi-person-circle"></i>
                </div>
                <div class="profile-details">
                    <strong id="dropdownName">Chargement...</strong>
                    <small id="dropdownEmail">email@exemple.com</small>
                    <span class="badge-role" id="dropdownRole">Utilisateur</span>
                </div>
            </div>
            <div class="dropdown-actions">
                <a href="profile.html" class="dropdown-item" role="menuitem">
                    <i class="bi bi-person"></i> Mon Profil
                </a>
                <a href="settings.html" class="dropdown-item" role="menuitem">
                    <i class="bi bi-gear"></i> ParamÃ¨tres
                </a>
                <hr class="dropdown-divider">
                <button class="dropdown-item text-danger" id="logout-btn" role="menuitem">
                    <i class="bi bi-box-arrow-right"></i> DÃ©connexion
                </button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        <div class="container">

        <!-- Profile Content -->
        <div id="profileContent" class="hidden">

            <!-- Profile Header -->
            <div class="profile-header">
                <div class="profile-avatar" id="profileAvatar">
                    <i class="bi bi-person-circle"></i>
                </div>
                <div class="profile-name" id="profileName">Chargement...</div>
                <div class="profile-email" id="profileEmail">-</div>
                <div class="profile-badge">
                    <i class="bi bi-shield-check"></i>
                    <span id="profileRole">Utilisateur</span>
                </div>
            </div>

            <!-- Profile Grid -->
            <div class="profile-grid">

                <!-- Card 1: Informations Personnelles -->
                <div class="card">
                    <div class="card-title">
                        <i class="bi bi-person-badge"></i>
                        Informations Personnelles
                    </div>
                    <div class="card-content">
                        <div class="info-grid">
                            <div class="info-item">
                                <span class="info-label"><i class="bi bi-person"></i> PrÃ©nom</span>
                                <span class="info-value" id="firstName">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label"><i class="bi bi-person"></i> Nom</span>
                                <span class="info-value" id="lastName">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label"><i class="bi bi-envelope"></i> Email</span>
                                <span class="info-value" id="email" style="font-size: 0.95rem;">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label"><i class="bi bi-shield-lock"></i> RÃ´le</span>
                                <span class="info-value" id="role">-</span>
                            </div>
                        </div>
                        <div class="action-buttons">
                            <button class="btn btn-secondary" onclick="enableEditMode()">
                                <i class="bi bi-pencil"></i> Modifier
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Card 2: SÃ©curitÃ© & Compte -->
                <div class="card">
                    <div class="card-title">
                        <i class="bi bi-shield-lock"></i>
                        SÃ©curitÃ© & Compte
                    </div>
                    <div class="card-content">
                        <div class="info-grid">
                            <div class="info-item">
                                <span class="info-label"><i class="bi bi-calendar"></i> Compte depuis</span>
                                <span class="info-value" id="accountAge">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label"><i class="bi bi-check-circle"></i> Statut</span>
                                <span class="info-value" style="color: var(--secura-success); border-color: rgba(16, 185, 129, 0.3);">Actif</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label"><i class="bi bi-key"></i> Code d'accÃ¨s</span>
                                <span class="info-value" id="accessCode" style="font-size: 0.9rem; letter-spacing: 0.2em;">-</span>
                            </div>
                        </div>
                        <div class="action-buttons">
                            <button class="btn btn-secondary" onclick="changePassword()">
                                <i class="bi bi-key"></i> Mot de passe
                            </button>
                            <button class="btn btn-secondary" onclick="regenerateCode()">
                                <i class="bi bi-arrow-clockwise"></i> RÃ©gÃ©nÃ©rer
                            </button>
                        </div>
                    </div>
                </div>

            </div>

            <div class="section-divider"></div>

            <!-- Statistiques -->
            <div class="stats-section">
                <h2 class="stats-section-title">
                    <i class="bi bi-bar-chart"></i> Vos Statistiques
                </h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="statEvents">0</div>
                        <div class="stat-label">Ã‰vÃ©nements CrÃ©Ã©s</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="statGuests">0</div>
                        <div class="stat-label">InvitÃ©s GÃ©rÃ©s</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="statScans">0</div>
                        <div class="stat-label">Scans EffectuÃ©s</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="statStorage">25%</div>
                        <div class="stat-label">Stockage UtilisÃ©</div>
                    </div>
                </div>
            </div>

            <div class="section-divider"></div>

            <!-- Actions -->
            <div class="section">
                <h2 class="stats-section-title">
                    <i class="bi bi-sliders"></i> Actions
                </h2>
                <div class="action-buttons" style="max-width: none;">
                    <button class="btn btn-secondary" onclick="viewSettings()">
                        <i class="bi bi-gear"></i> ParamÃ¨tres
                    </button>
                    <button class="btn btn-secondary" onclick="exportData()">
                        <i class="bi bi-download"></i> Exporter
                    </button>
                    <button class="btn btn-secondary" onclick="toggleSync()">
                        <i class="bi bi-arrow-repeat"></i> Sync
                    </button>
                    <button class="btn btn-danger" onclick="confirmLogout()">
                        <i class="bi bi-box-arrow-right"></i> DÃ©connexion
                    </button>
                </div>
            </div>

        </div>

      

    </div>

    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-top">
                <div class="row">
                    <div class="col-lg-4 mb-5 mb-lg-0">
                        <div class="footer-brand">
                            <div class="footer-logo">
                                <img src="assets/images/icon.png" alt="SECURA Logo">
                            </div>
                            <div class="footer-title">
                                <h3>SECURA</h3>
                                <p>Plateforme d'accÃ¨s Ã©vÃ©nementiel</p>
                            </div>
                        </div>
                        <p class="footer-description">
                            SECURA rÃ©volutionne l'accÃ¨s aux Ã©vÃ©nements avec des solutions innovantes, 
                            sÃ©curisÃ©es et intuitives pour organisateurs et participants.
                        </p>
                        <div class="social-links">
                            <a href="#" class="social-link">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                            <a href="#" class="social-link">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a href="#" class="social-link">
                                <i class="fab fa-instagram"></i>
                            </a>
                            <a href="#" class="social-link">
                                <i class="fab fa-linkedin-in"></i>
                            </a>
                            <a href="#" class="social-link">
                                <i class="fab fa-youtube"></i>
                            </a>
                        </div>
                    </div>
                    
                    <div class="col-lg-2 col-md-4 mb-5">
                        <h4>Navigation</h4>
                        <ul class="footer-links">
                            <li><a href="index.html">Accueil</a></li>
                            <li><a href="access.html">AccÃ¨s Ã©vÃ©nement</a></li>
                            <li><a href="#features">FonctionnalitÃ©s</a></li>
                            <li><a href="#how-it-works">Comment Ã§a marche</a></li>
                        </ul>
                    </div>
                    
                    <div class="col-lg-2 col-md-4 mb-5">
                        <h4>Compte</h4>
                        <ul class="footer-links">
                            <li><a href="login.html">Connexion</a></li>
                            <li><a href="register.html">Inscription</a></li>
                            <li><a href="forgot-password.html">Mot de passe oubliÃ©</a></li>
                        </ul>
                    </div>
                    
                    <div class="col-lg-4 col-md-4">
                        <h4>Newsletter</h4>
                        <p class="mb-4">Inscrivez-vous pour recevoir nos actualitÃ©s et offres exclusives.</p>
                        <form class="newsletter-form" id="newsletterForm">
                            <div class="newsletter-input-group">
                                <input type="email" class="newsletter-input" placeholder="Votre email" required>
                                <button type="submit" class="newsletter-btn">
                                    <i class="fas fa-paper-plane"></i>
                                   
                                </button>
                            </div>
                        </form>
                       
                        <div class="footer-controls-inline">
                            <!-- Theme Switch Button -->
                            <div class="theme-switch-footer">
                                <label class="theme-switch">
                                    <input type="checkbox" id="themeSwitchFooter" aria-label="Basculer le thÃ¨me">
                                    <span class="theme-switch-slider">
                                        <i class="fas fa-moon"></i>
                                        <i class="fas fa-sun"></i>
                                    </span>
                                </label>
                            </div>

                            <!-- Language Selector -->
                            <div class="language-selector"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="row align-items-center">
                    <div class="col-md-6">
                        <p class="copyright">Â© 2025 SECURA. Tous droits rÃ©servÃ©s.</p>
                    </div>
                    <div class="col-md-6">
                        <div class="footer-legal">
                            <a href="#">Mentions lÃ©gales</a>
                            <a href="#">ConfidentialitÃ©</a>
                            <a href="#">CGU</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scroll to Top -->
    <button class="scroll-top" id="scrollTop" aria-label="Retour en haut">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- SCRIPTS (ChargÃ©s aprÃ¨s le rendu du DOM) -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

    <!-- Librairies essentielles -->
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="js/toastify.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>


        <script src="js/auth-check.js"></script>
         <script src="js/storage.js"></script>
    <script defer src="js/particles-config.js"></script>
    <script defer src="js/audio-utils.js"></script>
    <script defer src="js/theme.js"></script>
    <script defer src="js/main.js"></script>
    <script defer src="js/sidebar.js"></script>
    <script src="js/auth.js"></script>
    

    <!-- Script de gestion du dashboard -->
    <script >
   
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // ğŸ” CONFIGURATION & VARIABLES GLOBALES
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        const API_URL =  'http://localhost:3000/api';
     // const API_URL =   'https://secura-qr.onrender.com/api';

        let currentUser = null;
        let currentStats = null;

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // ğŸ“Š INITIALISATION & CHARGEMENT
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('ğŸ“„ Page profil chargÃ©e');

          

            await loadProfile();
        });

        async function loadProfile() {
            try {
                showLoading();

                
                currentUser = await storage.getProfile();
                displayProfile();

                // Charger les statistiques
                await loadStatistics();

                hideLoading();
                showContent();

            } catch (err) {
                console.error('âŒ Erreur chargement profil:', err);
                showError(err.message);
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // ğŸ‘¤ AFFICHAGE DU PROFIL
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function displayProfile() {
            const firstName = currentUser.firstName || '';
            const lastName = currentUser.lastName || '';
            const fullName = `${firstName} ${lastName}`.trim() || currentUser.email.split('@')[0];

            // Profil header
            document.getElementById('profileName').textContent = fullName;
            document.getElementById('profileEmail').textContent = currentUser.email;
            document.getElementById('profileRole').textContent = (currentUser.role || 'Utilisateur').toUpperCase();

            // GÃ©nÃ©rer avatar avec initiales
            const initials = fullName
                .split(' ')
                .map(w => w[0])
                .join('')
                .toUpperCase()
                .slice(0, 2);

            const avatarEl = document.getElementById('profileAvatar');
            if (initials.length > 0) {
                avatarEl.textContent = initials;
                avatarEl.classList.add('initials');
            }

            // Infos personnelles
            document.getElementById('firstName').textContent = firstName || '-';
            document.getElementById('lastName').textContent = lastName || '-';
            document.getElementById('email').textContent = currentUser.email;
            document.getElementById('role').textContent = (currentUser.role || 'Utilisateur').toUpperCase();

            // Compte depuis
            const createdDate = new Date(currentUser.createdAt);
            const daysSince = Math.floor((Date.now() - createdDate.getTime()) / (1000 * 60 * 60 * 24));
            const accountAge = Math.floor((Date.now() - new Date(currentUser.createdAt).getTime()) / (1000 * 60 * 60 * 24));
            document.getElementById('accountAge').textContent = `${accountAge} jours`;

            // Code d'accÃ¨s (masquÃ©)
            const code = currentUser.accessCode || '-';
            document.getElementById('accessCode').textContent = code.length > 2 
                ? code.substring(0, 2) + '*'.repeat(code.length - 2)
                : code;

            console.log('âœ… Profil affichÃ©:', fullName);
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // ğŸ“ˆ CHARGEMENT DES STATISTIQUES
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        async function loadStatistics() {
            try {
                const response = await fetch(`${API_URL}/auth/statistics`, {
                    headers: {
                        'Authorization': `Bearer ${storage.token}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    if (data.success) {
                        currentStats = data.data;
                        document.getElementById('statEvents').textContent = data.data.eventsCreated || 0;
                        document.getElementById('statGuests').textContent = data.data.guestsManaged || 0;
                        document.getElementById('statScans').textContent = data.data.scansPerformed || 0;
                        document.getElementById('statStorage').textContent = data.data.storagePercent + '%' || '25%';
                        console.log('âœ… Statistiques chargÃ©es');
                    }
                }
            } catch (err) {
                console.warn('âš ï¸ Stats non disponibles:', err);
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // âœï¸ MODIFICATION DU PROFIL
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        async function enableEditMode() {
            const { value: formValues } = await Swal.fire({
                title: 'Modifier Profil',
                html: `
                    <div style="display: grid; gap: 1rem;">
                        <div style="text-align: left;">
                            <label style="font-size: 0.9rem; color: #A1A09A;">PrÃ©nom</label>
                            <input id="editFirstName" type="text" class="form-input" style="width: 100%;" placeholder="PrÃ©nom" value="${currentUser.firstName || ''}">
                        </div>
                        <div style="text-align: left;">
                            <label style="font-size: 0.9rem; color: #A1A09A;">Nom</label>
                            <input id="editLastName" type="text" class="form-input" style="width: 100%;" placeholder="Nom" value="${currentUser.lastName || ''}">
                        </div>
                    </div>
                `,
                showCancelButton: true,
                confirmButtonText: 'Enregistrer',
                confirmButtonColor: '#D97706',
                cancelButtonText: 'Annuler',
                didOpen: () => {
                    const inputs = document.querySelectorAll('.form-input');
                    inputs.forEach(input => {
                        input.style.background = 'rgba(255, 255, 255, 0.05)';
                        input.style.border = '1px solid rgba(255, 255, 255, 0.1)';
                        input.style.color = 'white';
                        input.style.padding = '0.75rem';
                        input.style.borderRadius = '0.5rem';
                    });
                },
                preConfirm: async () => {
                    const firstName = document.getElementById('editFirstName').value.trim();
                    const lastName = document.getElementById('editLastName').value.trim();

                    if (!firstName && !lastName) {
                        Swal.showValidationMessage('Veuillez entrer au moins un nom');
                        return false;
                    }

                    try {
                        const response = await fetch(`${API_URL}/auth/update-profile`, {
                            method: 'PUT',
                            headers: {
                                'Authorization': `Bearer ${storage.token}`,
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({ firstName, lastName })
                        });

                        if (!response.ok) throw new Error('Erreur mise Ã  jour');
                        const data = await response.json();
                        if (!data.success) throw new Error(data.message);

                        currentUser = { ...currentUser, ...data.user };
                        displayProfile();
                        return true;
                    } catch (err) {
                        Swal.showValidationMessage('âŒ ' + err.message);
                    }
                }
            });

            if (formValues) {
                Swal.fire('SuccÃ¨s', 'Profil mis Ã  jour', 'success');
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // ğŸ”‘ CHANGEMENT DE MOT DE PASSE
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        async function changePassword() {
            const { value: currentPassword } = await Swal.fire({
                title: 'Changer le mot de passe',
                input: 'password',
                inputLabel: 'Mot de passe actuel',
                inputPlaceholder: 'Entrez votre mot de passe',
                showCancelButton: true,
                confirmButtonColor: '#D97706',
                inputAttributes: {
                    style: 'background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white; padding: 0.75rem; border-radius: 0.5rem;'
                }
            });

            if (!currentPassword) return;

            const { value: newPassword } = await Swal.fire({
                title: 'Nouveau mot de passe',
                input: 'password',
                inputLabel: 'Nouveau mot de passe (6+ caractÃ¨res)',
                inputPlaceholder: 'Nouveau mot de passe',
                showCancelButton: true,
                confirmButtonColor: '#D97706',
                inputAttributes: {
                    style: 'background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white; padding: 0.75rem; border-radius: 0.5rem;'
                }
            });

            if (!newPassword || newPassword.length < 6) {
                Swal.fire('Erreur', 'Le mot de passe doit faire au moins 6 caractÃ¨res', 'error');
                return;
            }

            const { value: confirmPassword } = await Swal.fire({
                title: 'Confirmer mot de passe',
                input: 'password',
                inputLabel: 'Confirmez le nouveau mot de passe',
                inputPlaceholder: 'Confirmer',
                showCancelButton: true,
                confirmButtonColor: '#D97706',
                inputAttributes: {
                    style: 'background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white; padding: 0.75rem; border-radius: 0.5rem;'
                }
            });

            if (newPassword !== confirmPassword) {
                Swal.fire('Erreur', 'Les mots de passe ne correspondent pas', 'error');
                return;
            }

            try {
                const response = await fetch(`${API_URL}/auth/change-password`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${storage.token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ currentPassword, newPassword })
                });

                const data = await response.json();
                if (data.success) {
                    Swal.fire('SuccÃ¨s', 'Mot de passe changÃ© avec succÃ¨s', 'success');
                } else {
                    Swal.fire('Erreur', data.message || 'Impossible de changer le mot de passe', 'error');
                }
            } catch (err) {
                Swal.fire('Erreur', err.message, 'error');
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // ğŸ”„ RÃ‰GÃ‰NÃ‰RATION DU CODE D'ACCÃˆS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        async function regenerateCode() {
            const result = await Swal.fire({
                title: 'RÃ©gÃ©nÃ©rer le code d\'accÃ¨s',
                text: 'ÃŠtes-vous sÃ»r? Cela invalidera l\'ancien code.',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#D97706',
                confirmButtonText: 'RÃ©gÃ©nÃ©rer',
                cancelButtonText: 'Annuler'
            });

            if (!result.isConfirmed) return;

            try {
                const response = await fetch(`${API_URL}/auth/regenerate-access-code`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${storage.token}`,
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();
                if (data.success) {
                    currentUser.accessCode = data.accessCode;
                    displayProfile();
                    Swal.fire({
                        title: 'âœ… Nouveau Code GÃ©nÃ©rÃ©',
                        html: `<div style="text-align: center; padding: 1rem;">
                            <p style="margin-bottom: 1rem;">Votre nouveau code d'accÃ¨s:</p>
                            <div style="background: rgba(217,119,6,0.2); border: 2px solid #D97706; padding: 1rem; border-radius: 0.5rem; font-family: monospace; font-size: 1.5rem; font-weight: 700; letter-spacing: 0.3em; color: #D97706;">
                                ${data.accessCode}
                            </div>
                            <p style="margin-top: 1rem; font-size: 0.9rem; color: #A1A09A;">Conservez-le en sÃ©curitÃ©</p>
                        </div>`,
                        confirmButtonColor: '#D97706'
                    });
                }
            } catch (err) {
                Swal.fire('Erreur', err.message, 'error');
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // ğŸ“¥ EXPORT DES DONNÃ‰ES
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        async function exportData() {
            const result = await Swal.fire({
                title: 'ğŸ“¥ Exporter vos DonnÃ©es',
                text: 'Vos donnÃ©es seront tÃ©lÃ©chargÃ©es en JSON',
                icon: 'info',
                showCancelButton: true,
                confirmButtonText: 'TÃ©lÃ©charger',
                confirmButtonColor: '#D97706',
                cancelButtonText: 'Annuler'
            });

            if (!result.isConfirmed) return;

            try {
                Swal.fire({
                    title: 'TÃ©lÃ©chargement...',
                    allowOutsideClick: false,
                    didOpen: () => Swal.showLoading()
                });

                const response = await fetch(`${API_URL}/auth/export-data`, {
                    headers: {
                        'Authorization': `Bearer ${storage.token}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (!response.ok) throw new Error('Erreur export');
                const data = await response.json();

                const blob = new Blob([JSON.stringify(data.data, null, 2)], { type: 'application/json' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `secura-data-${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                window.URL.revokeObjectURL(url);

                Swal.fire('âœ… SuccÃ¨s', 'DonnÃ©es exportÃ©es avec succÃ¨s', 'success');
            } catch (err) {
                Swal.fire('âŒ Erreur', err.message, 'error');
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // âš™ï¸ PARAMÃˆTRES
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        async function viewSettings() {
            Swal.fire({
                title: 'âš™ï¸ ParamÃ¨tres',
                html: `
                    <div style="text-align: left; display: grid; gap: 1rem;">
                        <div style="padding: 1rem; background: rgba(217,119,6,0.1); border-radius: 0.5rem;">
                            <p style="margin: 0.5rem 0;"><strong>ğŸ“± ThÃ¨me:</strong> Sombre</p>
                        </div>
                        <div style="padding: 1rem; background: rgba(217,119,6,0.1); border-radius: 0.5rem;">
                            <p style="margin: 0.5rem 0;"><strong>ğŸŒ Langue:</strong> FranÃ§ais</p>
                        </div>
                        <div style="padding: 1rem; background: rgba(217,119,6,0.1); border-radius: 0.5rem;">
                            <p style="margin: 0.5rem 0;"><strong>ğŸ”„ Synchronisation:</strong> ActivÃ©e</p>
                        </div>
                        <div style="padding: 1rem; background: rgba(217,119,6,0.1); border-radius: 0.5rem;">
                            <p style="margin: 0.5rem 0;"><strong>ğŸ’¾ Stockage:</strong> 2.5 GB / 10 GB</p>
                        </div>
                    </div>
                `,
                confirmButtonColor: '#D97706',
                confirmButtonText: 'Fermer'
            });
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // ğŸ”„ TOGGLER SYNC
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function toggleSync() {
            Swal.fire({
                title: 'ğŸ”„ Synchronisation',
                text: storage.SYNC_ENABLED ? 'DÃ©sactiver la synchronisation?' : 'Activer la synchronisation?',
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: storage.SYNC_ENABLED ? 'DÃ©sactiver' : 'Activer',
                confirmButtonColor: '#D97706'
            }).then((result) => {
                if (result.isConfirmed) {
                    storage.toggleSync();
                    Swal.fire('âœ…', 'Synchronisation ' + (storage.SYNC_ENABLED ? 'activÃ©e' : 'dÃ©sactivÃ©e'), 'success');
                }
            });
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // ğŸšª DÃ‰CONNEXION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        async function confirmLogout() {
            const result = await Swal.fire({
                title: 'ğŸšª DÃ©connexion',
                text: 'ÃŠtes-vous sÃ»r de vouloir vous dÃ©connecter?',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#EF4444',
                confirmButtonText: 'Oui, dÃ©connecter',
                cancelButtonText: 'Annuler'
            });

            if (result.isConfirmed) {
                try {
                    Swal.fire({
                        title: 'DÃ©connexion...',
                        allowOutsideClick: false,
                        didOpen: () => Swal.showLoading()
                    });

                    await storage.logout();
                    window.location.href = '/login.html';
                } catch (err) {
                    console.error('Erreur logout:', err);
                    window.location.href = '/login.html';
                }
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // ğŸ¨ UI STATES
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function showLoading() {
            document.getElementById('loadingState').classList.remove('hidden');
            document.getElementById('profileContent').classList.add('hidden');
            document.getElementById('errorState').classList.add('hidden');
        }

        function hideLoading() {
            document.getElementById('loadingState').classList.add('hidden');
        }

        function showContent() {
            document.getElementById('profileContent').classList.remove('hidden');
        }

        function showError(message) {
            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('profileContent').classList.add('hidden');
            document.getElementById('errorState').classList.remove('hidden');
            document.getElementById('errorMessage').textContent = message;
        }
    </script>
</body>
</html>